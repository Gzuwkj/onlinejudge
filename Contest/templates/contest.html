{% extends "base.html" %}
{% load my_filter %}
{% block css_js %}
<style>
		body{min-width:880px;}
.subject-area{background:#fff;box-shadow: 0px 1px 4px 1px #888;width:100%;margin:3em 1em 4em 1em;max-width:850px;min-width:850px;}
.subject-area .nav>li{margin-right:1em;height:3.2em;}
.subject-area .nav>li>a{display:block;height:3em;width:100%;border-radius:0;border:none;}
.subject-area .nav>li:hover{background:#08c;cursor:pointer;}
.subject-area .nav>li:hover>a{background:#fff;}
.subject-area .nav .active{background:#08c;border:none;}
.subject-area .nav .active a{background:#fff;}
.nav-tabs > li.active > a,
.nav-tabs > li.active > a:hover,
.nav-tabs > li.active > a:focus {color: #555;cursor: default;background-color: #fff;border: none;border-bottom-color: transparent;}
.subject-area .Competition-instructions .Problem-content p{margin: 1em 1.6em 1.6rem 1.6em;line-height: 1.8;font-weight:500;font-size:15px;}
.subject-area .Competition-instructions{width:90%;margin:auto;margin-top:4em;display:flex;}
.subject-area .Competition-problem{padding:0.6em;padding-top:2em;display:flex;}
.subject-area .Competition-problem .table-hover > tbody > tr:hover {background-color: #C9D9D9;}
.subject-area .Competition-problem .table-hover > tbody > tr a:hover{cursor:pointer;text-decoration:none;}
.subject-area .Competition-rank{display:flex;flex-wrap:wrap;}
.subject-area .input-group{width:200px;margin-left:1em;margin-top:2.5em;}
.subject-area .input-group .font-icon{background:rgb(52, 152, 219);color:#fff;cursor:pointer;}
.subject-area .table-box{width:100%;padding:1.2em;}
.subject-area .Competition-rank .table-box tbody td{line-height:3em;}
.subject-area .Competition-rank .table-box tbody td a:hover{cursor:pointer;}
.subject-area .Competition-rank .table-box .FirstAc{background:green;color:#fff;}
.subject-area .Competition-rank .table-box .Ac{background:#a9f5af;}
.subject-area .Competition-rank .table-box .Wa{background:#fdd;}
.Page-navigation .pagination{margin:0;box-shadow:0.01px 0.01px 0px 0.55px gray;}
.Page-navigation{margin:auto;padding:0;margin-bottom:0.5em;display:flex;justify-content:center;}
.pagination > li > a:hover,
.pagination > li > span:hover,
.pagination > li > a:focus,
.pagination > li > span:focus {z-index: 2;color: #23527c;background-color: #9DA6A6;border-color: #9DA6A6;}
.subject-area .Competition-stu{display:flex;flex-wrap:wrap;}
.subject-area .Competition-stu .dropdown .caret{margin-left:0.5em;}
.subject-area .Competition-stu .dropdown .dropdown-menu{min-width:100px;}
.subject-area .Competition-stu .dropdown .dropdown-menu .divider{ margin:0;}
.subject-area .Competition-stu .dropdown .dropdown-menu>li>a:hover{color:#3d444c;}
.subject-area .Competition-stu .AC{color:green;}
.subject-area .Competition-stu .WA{color:red;}
.subject-area .Competition-stu table a:hover{cursor:pointer;}
.subject-area .Competition-stu table tbody td{text-align:center;}
	</style>
	<script>
		$(function(){
	var contestnav_s = $(".nav>li");
	var contestcon_s = $(".subject-area>div");
	$(contestcon_s[1]).show();
	$(contestcon_s[1]).siblings(":gt(0)").hide();
	$(contestnav_s[1]).addClass("active");
	contestnav_s.click(function(){
		if($(this).hasClass("active")) return;
		else {
			$(this).addClass("active");
			$(this).siblings().removeClass("active");
			$(contestcon_s[$(this).index()]).show();
			$(contestcon_s[$(this).index()]).siblings(":gt(0)").hide();
		}
	});

});
	</script>
{% endblock %}


{% block content %}
	<div class = "container">
				<div class = "subject-area">
					<ul class = "nav nav-tabs">
						<li><a>比赛说明</a></li>
						<li><a>题目</a></li>
						<li><a>排名</a></li>
						<li><a>提交状态</a></li>
					</ul>
					<div class = "Competition-instructions">

					</div>
					<div class = "Competition-problem">
						<table class = "table table-striped table-bordered table-hover">
							<thead>
							<tr>
								<td>PID</td><td>Title</td><td>Ratio(Ac/Submit)</td><td>Status</td>
							</tr>
							</thead>
							<tbody>
							{% for probs in problems %}
							{% for prob in probs %}
							<tr><td>{{nos|no_to_char}}</td><td><a href = "{% url 'problem:problem_page' prob.no %}">{{prob.title}}</a></td><td>{{ratio_list|solved}}</td><td>{{ac_list|my_filter}}</td></tr>
							{% endfor %}
							{% endfor %}
							</tbody>
						</table>
					</div>
					<div class = "Competition-rank">
						<form>
							<div class = "input-group">
								<input type="text" class="form-control" placeholder="昵称或者学校">
								<span class="input-group-addon font-icon">&#xf002</span>
							</div>
						</form>
						<div class = "table-box">

							<table class = "table table-striped table-bordered">
								<thead>
								<tr>
									<th style="text-align: center;">Rank</th>
									<th style="text-align: center;">User</th>
									<th style = "text-align: center;">Score</th>
									{% for no in nos %}
									<th style = "text-align: center;">{{nos|rank_char}}</th>
									{% endfor %}
								</tr>
								</thead>
								{% for list in sorted_list %}
								<tbody>
								<tr>
									<td style="text-align: center;">{{no_list|my_filter}}</td>
									<td style="text-align: center;">{{list.userName}}</td>
									<td style="text-align: center;">{{list.score}}</td>
									{% for value in list.result_list  %}
										{% for ac, wa in value %}
											{% if ac %}
											<td style="text-align: center;">{{ac}}
												{% if wa %}
												<span>(-{{wa}})</span>
												{% endif %}
											</td>
											{% else %}
											<td style="text-align: center;">
												{% if wa %}
												<span>(-{{wa}})</span>
												{% endif %}
											</td>
											{% endif %}
										{% endfor %}
									{% endfor %}
								</tr>
								</tbody>
								{% endfor %}
							</table>
							<nav class = "Page-navigation">
								<ul class="pagination">
									<li><a href="#"><span><b>&laquo;</b></span></a></li>
									<li><a href="#">1</a></li>
									<li><a href="#">2</a></li>
									<li><a href="#">3</a></li>
									<li><a href="#">4</a></li>
									<li><a href="#">5</a></li>
									<li><a href="#">6</a></li>
									<li><a href="#">7</a></li>
									<li><a href="#">8</a></li>
									<li><a href="#">...</a></li>
									<li><a href="#"><span><b>&raquo;</b></span></a></li>
								</ul>
							</nav>
						</div>
					</div>
					<div class = "Competition-stu">
						<form>
							<div class = "input-group">
								<input type="text" class="form-control" placeholder="昵称或者学校">
								<span class="input-group-addon font-icon">&#xf002</span>
							</div>
						</form>
						<div class = "table-box">
							<table class = "table table-striped table-bordered">
								<thead>
								<tr>
									<td>RunID</td>
									<td>
										<div class="dropdown">
											<div class="dropdown-toggle" data-toggle="dropdown">Problem<span class="caret"></span></div>
											<ul class="dropdown-menu">
												<li><a href="#">A</a></li>
												<li class="divider"></li>
												<li><a href="#">B</a></li>
												<li class="divider"></li>
												<li><a href="#">C</a></li>
												<li class="divider"></li>
												<li><a href="#">D</a></li>
												<li class="divider"></li>
												<li><a href="#">E</a></li>
												<li class="divider"></li>
												<li><a href="#">F</a></li>
												<li class="divider"></li>
												<li><a href="#">G</a></li>
											</ul>
										</div>
									</td>
									<td>
										<div class="dropdown">
											<div class="dropdown-toggle" data-toggle="dropdown">Judge States<span class="caret"></span></div>
											<ul class="dropdown-menu">
												<li><a href="#">AC</a></li>
												<li class="divider"></li>
												<li><a href="#">WA</a></li>
											</ul>
										</div>
									</td>
									<td>Time</td><td>Memory</td>
									<td>
										<div class="dropdown">
											<div class="dropdown-toggle" data-toggle="dropdown">Language<span class="caret"></span></div>
											<ul class="dropdown-menu">
												<li><a href="#">C</a></li>
												<li class="divider"></li>
												<li><a href="#">C++</a></li>
												<li class="divider"></li>
												<li><a href="#">Java</a></li>
												<li class="divider"></li>
												<li><a href="#">Python<a></li>
											</ul>
										</div>
									</td>
									<td>Submit Time</td><td>Author</td>
								</tr>
								</thead>
								<tbody>
								 {% for status in statuses  %}
								<tr>
									<td>{{status.runID}}</td>
									<td><a>{{status.probID}}</a></td>
									{% if 'Queueing' == status.result %}
									<td style = "text-align: center; color:orange">{{status.result}}
										{% elif 'Accepted' == status.result %}
									<td style = "text-align: center;color:green">{{status.result}}
										{% elif 'Wrong Answer' == status.result %}
									<td style = "text-align: center; color:red">{{status.result}}
										{% elif 'Presentation Error' == status.result %}
									<td style = "text-align: center;color:orange">{{status.result}}
										{% elif 'Compilation Error' == status.result %}
									<td style = "text-align: center; color:orange">{{status.result}}
										{% elif 'Runtime Error' == status.result %}
									<td style = "text-align: center;color:orange">{{status.result}}
										{% elif 'Time Limit Exceeded' == status.result %}
									<td style = "text-align: center; color:purple">{{status.result}}
										{% elif 'Memory Limit Exceeded' == status.result %}
									<td style = "text-align: center;color:purple">{{status.result}}
										{% elif 'Output Limit Exceeded' == status.result %}
									<td style = "text-align: center; color:purple">{{status.result}}
										{% else%}
									<td style = "text-align: center;color:purple">{{status.result}}
										{% endif %}
                					</td>
									<td>{{status.time}} ms</td>
									<td>{{status.memory}}KB</td>
									<td>{{status.language}}</td>
									<td>{{status.subTime}}</td>
									<td>{{status.userName}}</td>
								</tr>
								{% endfor %}
								</tbody>
							</table>
							<nav class = "Page-navigation">
								<ul class="pagination">
									<li><a href="#"><span><b>&laquo;</b></span></a></li>
									<li><a href="#">1</a></li>
									<li><a href="#">2</a></li>
									<li><a href="#">3</a></li>
									<li><a href="#">4</a></li>
									<li><a href="#">5</a></li>
									<li><a href="#">6</a></li>
									<li><a href="#">7</a></li>
									<li><a href="#">8</a></li>
									<li><a href="#">...</a></li>
									<li><a href="#"><span><b>&raquo;</b></span></a></li>
								</ul>
							</nav>
						</div>
					</div>
				</div>
			</div>
{% endblock %}

